<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Box Editor for Tesseract</title>

  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>
  <script src="../../js/jquery.hotkeys.js"></script>

  <!-- Leaftlet -->
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
    integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
    integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin="" />
  <script src="../../js/leaflet.js"></script>
  <link rel="stylesheet" href="../../css/leaflet.css">

  <!-- Leaflet Draw -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.3/leaflet.draw.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.3/leaflet.draw.js"></script>
  <!-- <script src="js/leaflet.draw.js"></script>
  <link rel="stylesheet" href="css/leaflet.draw.css" /> -->

  <!-- Tesseract -->
  <script src='https://unpkg.com/tesseract.js@4.0.2/dist/tesseract.min.js'></script>

  <!-- Fomanic UI -->
  <script src="https://cdn.jsdelivr.net/npm/fomantic-ui@2.9.2/dist/semantic.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.9.2/dist/semantic.min.css">

  <!-- Custom JS and CSS -->
  <script src="../../js/jquery.csv.min.js"></script>
  <script src="../../js/app-box-editor.js"></script>
  <link rel="stylesheet" href="../../css/styles.css">
</head>

<body>
  <div class="ui container">
    <div class="ui basic horizontal segments">
      <div class="ui basic horizontally fitted segment">
        <h1 class="ui header">
          Box Editor for Tesseract
        </h1>
      </div>
      <div class="ui basic horizontally fitted compact segment">
        <div id="navigationMenu" class="ui right secondary menu">
          <a class="active item">
            Box Editor
          </a>
          <a href="../../module/words-pairing" class="item">
            Words Pairing
          </a>
          <div class="item">
            <i class="large question circle icon"></i>
            <div class="ui fixed very wide popup">
              <div class="header">Welcome!</div>
              <div class="content">
                <p>
                  Upload an image to tag it with the ground truth. Bounding boxes are automatically generated and can be
                  edited. You
                  can also upload an existing <code>.box</code> file to edit it, but the generated bounding boxes will
                  be
                  overwritten.
                </p>
                <p>
                  The progress bar shows the progress of the tagging. When done, download the <code>.box</code> file and
                  the
                  <code>.gt.txt</code> file to use in Tesseract.
                </p>
                <p>
                  Box handles appear after clicking on it. You can drag them to move the box or resize it. Create boxes
                  using the
                  square tool and delete them using the trash can tool.
                </p>
                <div class="ui sub header">Tips</div>
                <p>
                  Select characters in the input field to see their Unicode name.
                </p>
                <p>
                  While tagging use <code>return</code> and <code>shift+return</code> to move forward and backward.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="ui secondary segment">
      <div class="ui two column stackable grid">
        <div class="eight wide column">
          <h4 class="ui dividing header">Upload Documents</h4>
          <form class="ui form">
            <div class="two fields">
              <div class="field">
                <label for="imageFile">Image</label>
                <input class="form-control" type="file" disabled id="imageFile" name="imageFile" accept="image/*" />
              </div>
              <div class="field">
                <label for="boxFile">Box File</label>
                <input class="form-control" type="file" disabled id="boxFile" name="boxFile" accept=".box" />
              </div>
            </div>
          </form>
        </div>
        <div class="eight wide column">
          <h4 class="ui dividing header">Download Documents</h4>
          <form class="ui equal width form">
            <div class="two fields">
              <div class="field">
                <label for="download">Box File</label>
                <div id="downloadBoxFileButton" name="download" class="disabled fluid ui button">
                  <i class="download icon"></i>
                  Download
                </div>
              </div>
              <div class="field">
                <label for="download">Ground Truth</label>
                <div id="downloadGroundTruthButton" name="download" class="disabled fluid ui button">
                  <i class="download icon"></i>
                  Download
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div id="taggingSegment" class="ui disable secondary segment">
      <div id="main-edit-area" class="ui basic fitted segment">
        <div class="ui maprow fitted segment" id="mapid"></div>
        <div class="ui tiny indicating progress" id="editingProgress">
          <div class="bar"></div>
          <div class="label"></div>
        </div>
        <form class="ui big form" id="updateTxt">
          <div id="myInputContainer" class="disabled field">
            <label class="col-sm-2 control-label" for="formtxt" id="txtlabel">Text</label>
            <div id="myInputBackground">&nbsp;</div>
            <!-- <input type="text" id="forsmtxt" boxid="" name="txt" value="" onkeyup="updateBackground()"> -->
          </div>
          <div class="field">
            <label class="col-sm-2 control-label" for="formtxt" id="txtlabel">Text</label>
            <input disabled type="text" id="formtxt" boxid="" name="txt" value="">
          </div>
        </form>
        <div class="ui mini blue empty circular label"></div>
        Latin
        <div class="ui mini red empty circular label"></div> Cyrillic
        <div class="ui basic fitted segment">
          <form id="formbox" class="ui form">
            <div class="four fields">
              <div class="field">
                <label for="x1">Left</label>
                <input disabled type="number" id="x1" name="x1" value="">
              </div>
              <div class="field">
                <label for="y1">Bottom</label>
                <input disabled type="number" id="y1" name="y1" value="">
              </div>
              <div class="field">
                <label for="x2">Right</label>
                <input disabled type="number" id="x2" name="x2" value="">
              </div>
              <div class="field">
                <label for="y2">Top</label>
                <input disabled type="number" id="y2" name="y2" value="">
              </div>
            </div>
          </form>
        </div>
        <div class="ui center aligned basic segment">
          <button id="previousBB" class="ui disabled left labeled icon button">
            <i class="left chevron icon"></i>
            Previous
          </button>

          <!-- <button id="updateText" class="ui disabled button" type="submit">Update Line</button> -->

          <button id="nextBB" class="ui disabled right labeled icon button">
            Next
            <i class="right chevron icon"></i>
          </button>
        </div>
      </div>
    </div>
    <div class="ui container">
      <div class="ui basic fitted segments">
        <div class="ui horizontal basic segments">
          <div class="ui basic fitted segment">
            <div class="ui horizontal small list">
              <div class="item">
                By: <a href="https://penteliuc.com">Marius E. Penteliuc</a>
              </div>
              <div class="item">
                Originally: <a href="https://johanjunkka.com">Johan Junkka</a>
              </div>
            </div>
          </div>
          <div class="ui right aligned basic fitted segment">
            <a href="https://github.com/mariuspenteliuc/box-editor-for-tesseract" target="_blank">
              <i class="github icon"></i>
            </a>
          </div>
        </div>
        <div class="ui basic horizontally fitted segment">
          <p>This work was supported by a grant of the Romanian Ministry of Research, Innovation and Digitization, CCCDI
            -
            UEFISCDI,
            project number PN-III-P2-2.1-PED-2021-0693, within PNCDI III.</p>
        </div>
      </div>

    </div>

  </div>
  </div>

</body>

</html>